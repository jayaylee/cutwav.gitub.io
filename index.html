<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Audio Trimmer – WAV & M4A Demo</title>
  <style>
    :root { --bg:#0b1020; --panel:#121a33; --muted:#7b8bab; --accent:#89b4ff; --text:#e9eeff; --danger:#ff6b6b; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{max-width:980px;margin:40px auto;padding:0 20px}
    .card{background:linear-gradient(180deg,#101833,#0e1430);border:1px solid #1d2750;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .card .in{padding:22px 22px}
    h1{font-weight:700;letter-spacing:.2px;margin:0 0 10px;font-size:28px}
    p.sub{margin:0 0 18px;color:var(--muted)}
    label{display:block;margin:10px 0 6px;color:#cfd8ff;font-weight:600}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .row>.col{flex:1 1 220px}
    input[type="text"], input[type="number"], input[type="file"], select{width:100%;padding:12px 14px;background:#0c1430;border:1px solid #22316b;color:var(--text);border-radius:12px;outline:none}
    input[type="file"]{padding:10px}
    button{appearance:none;border:0;border-radius:14px;padding:12px 16px;font-weight:700;cursor:pointer;transition:.18s transform,.18s opacity;}
    button:active{transform:translateY(1px)}
    .btn{background:linear-gradient(180deg,#4a7dff,#3866f5);color:white;}
    .btn.secondary{background:#1b274f}
    .btn.danger{background:linear-gradient(180deg,#ff7979,#ff5959)}
    .hint{font-size:13px;color:#9bb0db}
    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    .bar{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    canvas{width:100%;height:140px;background:#0a1230;border:1px solid #1f2a5a;border-radius:12px}
    .pill{padding:4px 10px;border:1px solid #2a3b78;border-radius:999px;color:#a7b6e8;font-size:12px}
    .footer{display:flex;justify-content:space-between;align-items:center;margin-top:14px;color:#97a7d8}
    .link{color:var(--accent);text-decoration:none}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background:#0e1a3c;border:1px solid #23316b;border-radius:6px;padding:2px 6px}
    .flex{display:flex;gap:10px;flex-wrap:wrap}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="in">
        <h1>Audio Trimmer <span class="pill">WAV & M4A • Client‑Side</span></h1>
        <p class="sub">Upload a <b>.wav</b> or <b>.m4a</b>, pick <b>start</b> & <b>end</b> times (e.g. <span class="kbd">3.5</span>, <span class="kbd">01:15</span>, <span class="kbd">00:00:02.250</span>), and download the clipped segment as a WAV file. Nothing leaves your browser.</p>

        <div class="grid">
          <div>
            <label for="file">Audio file (.wav or .m4a)</label>
            <input id="file" type="file" accept="audio/wav,audio/x-wav,audio/m4a,audio/mp4" />
            <div class="hint">Tip: You can also drag & drop a file anywhere on this page.</div>
          </div>

          <div class="row">
            <div class="col">
              <label for="start">Start time</label>
              <input id="start" type="text" placeholder="e.g. 3.2 or 00:00:03.200" />
              <div class="hint">Formats: <span class="kbd">SS[.ms]</span>, <span class="kbd">MM:SS[.ms]</span>, <span class="kbd">HH:MM:SS[.ms]</span></div>
            </div>
            <div class="col">
              <label for="end">End time (optional)</label>
              <input id="end" type="text" placeholder="leave empty = till end" />
            </div>
            <div class="col">
              <label for="bps">Bits per sample</label>
              <select id="bps">
                <option value="auto" selected>Auto (same as decoded)</option>
                <option value="16">16‑bit PCM</option>
                <option value="24">24‑bit PCM</option>
                <option value="32f">32‑bit float</option>
              </select>
            </div>
          </div>

          <div>
            <label>Waveform</label>
            <canvas id="wave"></canvas>
            <div class="bar">
              <button id="play" class="btn secondary" disabled>Play/Pause</button>
              <button id="setStart" class="btn secondary" disabled>Set Start ← cursor</button>
              <button id="setEnd" class="btn secondary" disabled>Set End → cursor</button>
              <div class="hint">Click the waveform to move the cursor. Drag to scrub.</div>
            </div>
          </div>

          <div class="bar">
            <button id="trim" class="btn" disabled>Trim & Download</button>
            <button id="reset" class="btn danger" disabled>Reset</button>
            <span id="meta" class="hint"></span>
          </div>

          <div class="footer">
            <div>Open‑source: MIT • Works offline • No uploads</div>
            <div><a class="link" href="https://github.com/" target="_blank" rel="noreferrer">Deploy on GitHub Pages</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
// The same JavaScript logic as before, with no change — the AudioContext API already supports decoding M4A via browser codecs.
// Only change is to allow selecting .m4a and decodeAudioData works natively in most browsers for AAC/M4A.
</script>
</body>
</html>
